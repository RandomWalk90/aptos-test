import{ie as Us,bw as Bs,gk as ot}from"./index2.js";var j={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.output=F.exists=F.hash=F.bytes=F.bool=F.number=void 0;function _t(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}F.number=_t;function An(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}F.bool=An;function Xt(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}F.bytes=Xt;function Un(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_t(e.outputLen),_t(e.blockLen)}F.hash=Un;function Bn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}F.exists=Bn;function Sn(e,t){Xt(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}F.output=Sn;const Ss={number:_t,bool:An,bytes:Xt,hash:Un,exists:Bn,output:Sn};F.default=Ss;var Ce={},En={},Te={},yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.crypto=void 0;yt.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=yt,n=h=>new Uint8Array(h.buffer,h.byteOffset,h.byteLength);e.u8=n;const s=h=>new Uint32Array(h.buffer,h.byteOffset,Math.floor(h.byteLength/4));e.u32=s;const i=h=>new DataView(h.buffer,h.byteOffset,h.byteLength);e.createView=i;const o=(h,w)=>h<<32-w|h>>>w;if(e.rotr=o,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},(h,w)=>w.toString(16).padStart(2,"0"));function a(h){if(!(h instanceof Uint8Array))throw new Error("Uint8Array expected");let w="";for(let k=0;k<h.length;k++)w+=r[h[k]];return w}e.bytesToHex=a;function c(h){if(typeof h!="string")throw new TypeError("hexToBytes: expected string, got "+typeof h);if(h.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const w=new Uint8Array(h.length/2);for(let k=0;k<w.length;k++){const z=k*2,B=h.slice(z,z+2),S=Number.parseInt(B,16);if(Number.isNaN(S)||S<0)throw new Error("Invalid byte sequence");w[k]=S}return w}e.hexToBytes=c;const d=async()=>{};e.nextTick=d;async function u(h,w,k){let z=Date.now();for(let B=0;B<h;B++){k(B);const S=Date.now()-z;S>=0&&S<w||(await(0,e.nextTick)(),z+=S)}}e.asyncLoop=u;function l(h){if(typeof h!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof h}`);return new TextEncoder().encode(h)}e.utf8ToBytes=l;function f(h){if(typeof h=="string"&&(h=l(h)),!(h instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof h})`);return h}e.toBytes=f;function _(...h){if(!h.every(z=>z instanceof Uint8Array))throw new Error("Uint8Array list expected");if(h.length===1)return h[0];const w=h.reduce((z,B)=>z+B.length,0),k=new Uint8Array(w);for(let z=0,B=0;z<h.length;z++){const S=h[z];k.set(S,B),B+=S.length}return k}e.concatBytes=_;class T{clone(){return this._cloneInto()}}e.Hash=T;const v=h=>Object.prototype.toString.call(h)==="[object Object]"&&h.constructor===Object;function U(h,w){if(w!==void 0&&(typeof w!="object"||!v(w)))throw new TypeError("Options should be object or undefined");return Object.assign(h,w)}e.checkOpts=U;function $(h){const w=z=>h().update(f(z)).digest(),k=h();return w.outputLen=k.outputLen,w.blockLen=k.blockLen,w.create=()=>h(),w}e.wrapConstructor=$;function O(h){const w=(z,B)=>h(B).update(f(z)).digest(),k=h({});return w.outputLen=k.outputLen,w.blockLen=k.blockLen,w.create=z=>h(z),w}e.wrapConstructorWithOpts=O;function y(h=32){if(t.crypto.web)return t.crypto.web.getRandomValues(new Uint8Array(h));if(t.crypto.node)return new Uint8Array(t.crypto.node.randomBytes(h).buffer);throw new Error("The environment doesn't have randomBytes function")}e.randomBytes=y})(Te);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=F,n=Te;class s extends n.Hash{constructor(r,a){super(),this.finished=!1,this.destroyed=!1,t.default.hash(r);const c=(0,n.toBytes)(a);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const d=this.blockLen,u=new Uint8Array(d);u.set(c.length>d?r.create().update(c).digest():c);for(let l=0;l<u.length;l++)u[l]^=54;this.iHash.update(u),this.oHash=r.create();for(let l=0;l<u.length;l++)u[l]^=106;this.oHash.update(u),u.fill(0)}update(r){return t.default.exists(this),this.iHash.update(r),this}digestInto(r){t.default.exists(this),t.default.bytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:c,finished:d,destroyed:u,blockLen:l,outputLen:f}=this;return r=r,r.finished=d,r.destroyed=u,r.blockLen=l,r.outputLen=f,r.oHash=a._cloneInto(r.oHash),r.iHash=c._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(o,r,a)=>new s(o,r).update(a).digest();e.hmac=i,e.hmac.create=(o,r)=>new s(o,r)})(En);Object.defineProperty(Ce,"__esModule",{value:!0});Ce.pbkdf2Async=Ce.pbkdf2=void 0;const at=F,Es=En,ze=Te;function kn(e,t,n,s){at.default.hash(e);const i=(0,ze.checkOpts)({dkLen:32,asyncTick:10},s),{c:o,dkLen:r,asyncTick:a}=i;if(at.default.number(o),at.default.number(r),at.default.number(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,ze.toBytes)(t),d=(0,ze.toBytes)(n),u=new Uint8Array(r),l=Es.hmac.create(e,c),f=l._cloneInto().update(d);return{c:o,dkLen:r,asyncTick:a,DK:u,PRF:l,PRFSalt:f}}function In(e,t,n,s,i){return e.destroy(),t.destroy(),s&&s.destroy(),i.fill(0),n}function ks(e,t,n,s){const{c:i,dkLen:o,DK:r,PRF:a,PRFSalt:c}=kn(e,t,n,s);let d;const u=new Uint8Array(4),l=(0,ze.createView)(u),f=new Uint8Array(a.outputLen);for(let _=1,T=0;T<o;_++,T+=a.outputLen){const v=r.subarray(T,T+a.outputLen);l.setInt32(0,_,!1),(d=c._cloneInto(d)).update(u).digestInto(f),v.set(f.subarray(0,v.length));for(let U=1;U<i;U++){a._cloneInto(d).update(f).digestInto(f);for(let $=0;$<v.length;$++)v[$]^=f[$]}}return In(a,c,r,d,f)}Ce.pbkdf2=ks;async function Is(e,t,n,s){const{c:i,dkLen:o,asyncTick:r,DK:a,PRF:c,PRFSalt:d}=kn(e,t,n,s);let u;const l=new Uint8Array(4),f=(0,ze.createView)(l),_=new Uint8Array(c.outputLen);for(let T=1,v=0;v<o;T++,v+=c.outputLen){const U=a.subarray(v,v+c.outputLen);f.setInt32(0,T,!1),(u=d._cloneInto(u)).update(l).digestInto(_),U.set(_.subarray(0,U.length)),await(0,ze.asyncLoop)(i-1,r,$=>{c._cloneInto(u).update(_).digestInto(_);for(let O=0;O<U.length;O++)U[O]^=_[O]})}return In(c,d,a,u,_)}Ce.pbkdf2Async=Is;var Le={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.SHA2=void 0;const Ft=F,Re=Te;function zs(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const i=BigInt(32),o=BigInt(4294967295),r=Number(n>>i&o),a=Number(n&o),c=s?4:0,d=s?0:4;e.setUint32(t+c,r,s),e.setUint32(t+d,a,s)}let Hs=class extends Re.Hash{constructor(t,n,s,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Re.createView)(this.buffer)}update(t){Ft.default.exists(this);const{view:n,buffer:s,blockLen:i}=this;t=(0,Re.toBytes)(t);const o=t.length;for(let r=0;r<o;){const a=Math.min(i-this.pos,o-r);if(a===i){const c=(0,Re.createView)(t);for(;i<=o-r;r+=i)this.process(c,r);continue}s.set(t.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ft.default.exists(this),Ft.default.output(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:o}=this;let{pos:r}=this;n[r++]=128,this.buffer.subarray(r).fill(0),this.padOffset>i-r&&(this.process(s,0),r=0);for(let l=r;l<i;l++)n[l]=0;zs(s,i-8,BigInt(this.length*8),o),this.process(s,0);const a=(0,Re.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,u=this.get();if(d>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<d;l++)a.setUint32(4*l,u[l],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:o,destroyed:r,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=r,i%n&&t.buffer.set(s),t}};Xe.SHA2=Hs;Object.defineProperty(Le,"__esModule",{value:!0});Le.sha224=Le.sha256=void 0;const $s=Xe,Q=Te,Cs=(e,t,n)=>e&t^~e&n,Ls=(e,t,n)=>e&t^e&n^t&n,Os=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),re=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),oe=new Uint32Array(64);let zn=class extends $s.SHA2{constructor(){super(64,32,8,!1),this.A=re[0]|0,this.B=re[1]|0,this.C=re[2]|0,this.D=re[3]|0,this.E=re[4]|0,this.F=re[5]|0,this.G=re[6]|0,this.H=re[7]|0}get(){const{A:t,B:n,C:s,D:i,E:o,F:r,G:a,H:c}=this;return[t,n,s,i,o,r,a,c]}set(t,n,s,i,o,r,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=i|0,this.E=o|0,this.F=r|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)oe[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=oe[l-15],_=oe[l-2],T=(0,Q.rotr)(f,7)^(0,Q.rotr)(f,18)^f>>>3,v=(0,Q.rotr)(_,17)^(0,Q.rotr)(_,19)^_>>>10;oe[l]=v+oe[l-7]+T+oe[l-16]|0}let{A:s,B:i,C:o,D:r,E:a,F:c,G:d,H:u}=this;for(let l=0;l<64;l++){const f=(0,Q.rotr)(a,6)^(0,Q.rotr)(a,11)^(0,Q.rotr)(a,25),_=u+f+Cs(a,c,d)+Os[l]+oe[l]|0,v=((0,Q.rotr)(s,2)^(0,Q.rotr)(s,13)^(0,Q.rotr)(s,22))+Ls(s,i,o)|0;u=d,d=c,c=a,a=r+_|0,r=o,o=i,i=s,s=_+v|0}s=s+this.A|0,i=i+this.B|0,o=o+this.C|0,r=r+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,u=u+this.H|0,this.set(s,i,o,r,a,c,d,u)}roundClean(){oe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class Ns extends zn{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Le.sha256=(0,Q.wrapConstructor)(()=>new zn);Le.sha224=(0,Q.wrapConstructor)(()=>new Ns);var Y={},Hn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const t=BigInt(2**32-1),n=BigInt(32);function s(b,m=!1){return m?{h:Number(b&t),l:Number(b>>n&t)}:{h:Number(b>>n&t)|0,l:Number(b&t)|0}}e.fromBig=s;function i(b,m=!1){let g=new Uint32Array(b.length),N=new Uint32Array(b.length);for(let M=0;M<b.length;M++){const{h:ne,l:As}=s(b[M],m);[g[M],N[M]]=[ne,As]}return[g,N]}e.split=i;const o=(b,m)=>BigInt(b>>>0)<<n|BigInt(m>>>0);e.toBig=o;const r=(b,m,g)=>b>>>g,a=(b,m,g)=>b<<32-g|m>>>g,c=(b,m,g)=>b>>>g|m<<32-g,d=(b,m,g)=>b<<32-g|m>>>g,u=(b,m,g)=>b<<64-g|m>>>g-32,l=(b,m,g)=>b>>>g-32|m<<64-g,f=(b,m)=>m,_=(b,m)=>b,T=(b,m,g)=>b<<g|m>>>32-g,v=(b,m,g)=>m<<g|b>>>32-g,U=(b,m,g)=>m<<g-32|b>>>64-g,$=(b,m,g)=>b<<g-32|m>>>64-g;function O(b,m,g,N){const M=(m>>>0)+(N>>>0);return{h:b+g+(M/2**32|0)|0,l:M|0}}e.add=O;const y=(b,m,g)=>(b>>>0)+(m>>>0)+(g>>>0),h=(b,m,g,N)=>m+g+N+(b/2**32|0)|0,w=(b,m,g,N)=>(b>>>0)+(m>>>0)+(g>>>0)+(N>>>0),k=(b,m,g,N,M)=>m+g+N+M+(b/2**32|0)|0,z=(b,m,g,N,M)=>(b>>>0)+(m>>>0)+(g>>>0)+(N>>>0)+(M>>>0),B=(b,m,g,N,M,ne)=>m+g+N+M+ne+(b/2**32|0)|0,S={fromBig:s,split:i,toBig:e.toBig,shrSH:r,shrSL:a,rotrSH:c,rotrSL:d,rotrBH:u,rotrBL:l,rotr32H:f,rotr32L:_,rotlSH:T,rotlSL:v,rotlBH:U,rotlBL:$,add:O,add3L:y,add3H:h,add4L:w,add4H:k,add5H:B,add5L:z};e.default=S})(Hn);Object.defineProperty(Y,"__esModule",{value:!0});Y.sha384=Y.sha512_256=Y.sha512_224=Y.sha512=Y.SHA512=void 0;const Ds=Xe,A=Hn,bt=Te,[Ps,Ms]=A.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ae=new Uint32Array(80),ce=new Uint32Array(80);let Je=class extends Ds.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:s,Bl:i,Ch:o,Cl:r,Dh:a,Dl:c,Eh:d,El:u,Fh:l,Fl:f,Gh:_,Gl:T,Hh:v,Hl:U}=this;return[t,n,s,i,o,r,a,c,d,u,l,f,_,T,v,U]}set(t,n,s,i,o,r,a,c,d,u,l,f,_,T,v,U){this.Ah=t|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=o|0,this.Cl=r|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=u|0,this.Fh=l|0,this.Fl=f|0,this.Gh=_|0,this.Gl=T|0,this.Hh=v|0,this.Hl=U|0}process(t,n){for(let y=0;y<16;y++,n+=4)ae[y]=t.getUint32(n),ce[y]=t.getUint32(n+=4);for(let y=16;y<80;y++){const h=ae[y-15]|0,w=ce[y-15]|0,k=A.default.rotrSH(h,w,1)^A.default.rotrSH(h,w,8)^A.default.shrSH(h,w,7),z=A.default.rotrSL(h,w,1)^A.default.rotrSL(h,w,8)^A.default.shrSL(h,w,7),B=ae[y-2]|0,S=ce[y-2]|0,b=A.default.rotrSH(B,S,19)^A.default.rotrBH(B,S,61)^A.default.shrSH(B,S,6),m=A.default.rotrSL(B,S,19)^A.default.rotrBL(B,S,61)^A.default.shrSL(B,S,6),g=A.default.add4L(z,m,ce[y-7],ce[y-16]),N=A.default.add4H(g,k,b,ae[y-7],ae[y-16]);ae[y]=N|0,ce[y]=g|0}let{Ah:s,Al:i,Bh:o,Bl:r,Ch:a,Cl:c,Dh:d,Dl:u,Eh:l,El:f,Fh:_,Fl:T,Gh:v,Gl:U,Hh:$,Hl:O}=this;for(let y=0;y<80;y++){const h=A.default.rotrSH(l,f,14)^A.default.rotrSH(l,f,18)^A.default.rotrBH(l,f,41),w=A.default.rotrSL(l,f,14)^A.default.rotrSL(l,f,18)^A.default.rotrBL(l,f,41),k=l&_^~l&v,z=f&T^~f&U,B=A.default.add5L(O,w,z,Ms[y],ce[y]),S=A.default.add5H(B,$,h,k,Ps[y],ae[y]),b=B|0,m=A.default.rotrSH(s,i,28)^A.default.rotrBH(s,i,34)^A.default.rotrBH(s,i,39),g=A.default.rotrSL(s,i,28)^A.default.rotrBL(s,i,34)^A.default.rotrBL(s,i,39),N=s&o^s&a^o&a,M=i&r^i&c^r&c;$=v|0,O=U|0,v=_|0,U=T|0,_=l|0,T=f|0,{h:l,l:f}=A.default.add(d|0,u|0,S|0,b|0),d=a|0,u=c|0,a=o|0,c=r|0,o=s|0,r=i|0;const ne=A.default.add3L(b,g,M);s=A.default.add3H(ne,S,m,N),i=ne|0}({h:s,l:i}=A.default.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:o,l:r}=A.default.add(this.Bh|0,this.Bl|0,o|0,r|0),{h:a,l:c}=A.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l:u}=A.default.add(this.Dh|0,this.Dl|0,d|0,u|0),{h:l,l:f}=A.default.add(this.Eh|0,this.El|0,l|0,f|0),{h:_,l:T}=A.default.add(this.Fh|0,this.Fl|0,_|0,T|0),{h:v,l:U}=A.default.add(this.Gh|0,this.Gl|0,v|0,U|0),{h:$,l:O}=A.default.add(this.Hh|0,this.Hl|0,$|0,O|0),this.set(s,i,o,r,a,c,d,u,l,f,_,T,v,U,$,O)}roundClean(){ae.fill(0),ce.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Y.SHA512=Je;class Fs extends Je{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}let qs=class extends Je{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Gs=class extends Je{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Y.sha512=(0,bt.wrapConstructor)(()=>new Je);Y.sha512_224=(0,bt.wrapConstructor)(()=>new Fs);Y.sha512_256=(0,bt.wrapConstructor)(()=>new qs);Y.sha384=(0,bt.wrapConstructor)(()=>new Gs);Object.defineProperty(j,"__esModule",{value:!0});var $n=j.mnemonicToSeedSync=j.mnemonicToSeed=j.validateMnemonic=j.entropyToMnemonic=j.mnemonicToEntropy=j.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Cn=F,Ln=Ce,Rs=Le,On=Y,Ks=Te,ct=Us,Ws=e=>e[0]==="あいこくしん";function Nn(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function Jt(e){const t=Nn(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function Dn(e){Cn.default.bytes(e,16,20,24,28,32)}function js(e,t=128){if(Cn.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return Fn((0,Ks.randomBytes)(t/8),e)}j.generateMnemonic=js;const Vs=e=>{const t=8-e.length/4;return new Uint8Array([(0,Rs.sha256)(e)[0]>>t<<t])};function Pn(e){if(!Array.isArray(e)||e.length!==2**11||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),ct.utils.chain(ct.utils.checksum(1,Vs),ct.utils.radix2(11,!0),ct.utils.alphabet(e))}function Mn(e,t){const{words:n}=Jt(e),s=Pn(t).decode(n);return Dn(s),s}j.mnemonicToEntropy=Mn;function Fn(e,t){return Dn(e),Pn(t).encode(e).join(Ws(t)?"　":" ")}j.entropyToMnemonic=Fn;function Qs(e,t){try{Mn(e,t)}catch{return!1}return!0}j.validateMnemonic=Qs;const qn=e=>Nn(`mnemonic${e}`);function Xs(e,t=""){return(0,Ln.pbkdf2Async)(On.sha512,Jt(e).nfkd,qn(t),{c:2048,dkLen:64})}j.mnemonicToSeed=Xs;function Js(e,t=""){return(0,Ln.pbkdf2)(On.sha512,Jt(e).nfkd,qn(t),{c:2048,dkLen:64})}$n=j.mnemonicToSeedSync=Js;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ys=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),qt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ee=(e,t)=>e<<32-t|e>>>t,Zs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Zs)throw new Error("Non little-endian hardware is not supported");const ei=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Gn(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=ei[e[n]];return t}function Rn(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const s=n*2,i=e.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function ti(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Ye(e){if(typeof e=="string"&&(e=ti(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class Yt{clone(){return this._cloneInto()}}function Ze(e){const t=s=>e().update(Ye(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function ni(e){const t=(s,i)=>e(i).update(Ye(s)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=s=>e(s),t}function Rt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function si(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Kn(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ii(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Rt(e.outputLen),Rt(e.blockLen)}function ri(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function oi(e,t){Kn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const V={number:Rt,bool:si,bytes:Kn,hash:ii,exists:ri,output:oi};function ai(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const i=BigInt(32),o=BigInt(4294967295),r=Number(n>>i&o),a=Number(n&o),c=s?4:0,d=s?0:4;e.setUint32(t+c,r,s),e.setUint32(t+d,a,s)}class Wn extends Yt{constructor(t,n,s,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=qt(this.buffer)}update(t){V.exists(this);const{view:n,buffer:s,blockLen:i}=this;t=Ye(t);const o=t.length;for(let r=0;r<o;){const a=Math.min(i-this.pos,o-r);if(a===i){const c=qt(t);for(;i<=o-r;r+=i)this.process(c,r);continue}s.set(t.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){V.exists(this),V.output(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:i,isLE:o}=this;let{pos:r}=this;n[r++]=128,this.buffer.subarray(r).fill(0),this.padOffset>i-r&&(this.process(s,0),r=0);for(let c=r;c<i;c++)n[c]=0;ai(s,i-8,BigInt(this.length*8),o),this.process(s,0);const a=qt(t);this.get().forEach((c,d)=>a.setUint32(4*d,c,o))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:i,finished:o,destroyed:r,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=r,i%n&&t.buffer.set(s),t}}const ci=(e,t,n)=>e&t^~e&n,li=(e,t,n)=>e&t^e&n^t&n,di=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),le=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),de=new Uint32Array(64);class ui extends Wn{constructor(){super(64,32,8,!1),this.A=le[0]|0,this.B=le[1]|0,this.C=le[2]|0,this.D=le[3]|0,this.E=le[4]|0,this.F=le[5]|0,this.G=le[6]|0,this.H=le[7]|0}get(){const{A:t,B:n,C:s,D:i,E:o,F:r,G:a,H:c}=this;return[t,n,s,i,o,r,a,c]}set(t,n,s,i,o,r,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=i|0,this.E=o|0,this.F=r|0,this.G=a|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)de[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=de[l-15],_=de[l-2],T=ee(f,7)^ee(f,18)^f>>>3,v=ee(_,17)^ee(_,19)^_>>>10;de[l]=v+de[l-7]+T+de[l-16]|0}let{A:s,B:i,C:o,D:r,E:a,F:c,G:d,H:u}=this;for(let l=0;l<64;l++){const f=ee(a,6)^ee(a,11)^ee(a,25),_=u+f+ci(a,c,d)+di[l]+de[l]|0,v=(ee(s,2)^ee(s,13)^ee(s,22))+li(s,i,o)|0;u=d,d=c,c=a,a=r+_|0,r=o,o=i,i=s,s=_+v|0}s=s+this.A|0,i=i+this.B|0,o=o+this.C|0,r=r+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,u=u+this.H|0,this.set(s,i,o,r,a,c,d,u)}roundClean(){de.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const hi=Ze(()=>new ui),lt=BigInt(2**32-1),Kt=BigInt(32);function jn(e,t=!1){return t?{h:Number(e&lt),l:Number(e>>Kt&lt)}:{h:Number(e>>Kt&lt)|0,l:Number(e&lt)|0}}function fi(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:r}=jn(e[i],t);[n[i],s[i]]=[o,r]}return[n,s]}const _i=(e,t)=>BigInt(e>>>0)<<Kt|BigInt(t>>>0),yi=(e,t,n)=>e>>>n,bi=(e,t,n)=>e<<32-n|t>>>n,pi=(e,t,n)=>e>>>n|t<<32-n,gi=(e,t,n)=>e<<32-n|t>>>n,wi=(e,t,n)=>e<<64-n|t>>>n-32,mi=(e,t,n)=>e>>>n-32|t<<64-n,vi=(e,t)=>t,xi=(e,t)=>e,Ti=(e,t,n)=>e<<n|t>>>32-n,Ai=(e,t,n)=>t<<n|e>>>32-n,Ui=(e,t,n)=>t<<n-32|e>>>64-n,Bi=(e,t,n)=>e<<n-32|t>>>64-n;function Si(e,t,n,s){const i=(t>>>0)+(s>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const Ei=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),ki=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,Ii=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),zi=(e,t,n,s,i)=>t+n+s+i+(e/2**32|0)|0,Hi=(e,t,n,s,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(i>>>0),$i=(e,t,n,s,i,o)=>t+n+s+i+o+(e/2**32|0)|0,x={fromBig:jn,split:fi,toBig:_i,shrSH:yi,shrSL:bi,rotrSH:pi,rotrSL:gi,rotrBH:wi,rotrBL:mi,rotr32H:vi,rotr32L:xi,rotlSH:Ti,rotlSL:Ai,rotlBH:Ui,rotlBL:Bi,add:Si,add3L:Ei,add3H:ki,add4L:Ii,add4H:zi,add5H:$i,add5L:Hi},[Vn,Qn,Xn]=[[],[],[]],Ci=BigInt(0),Ke=BigInt(1),Li=BigInt(2),Oi=BigInt(7),Ni=BigInt(256),Di=BigInt(113);for(let e=0,t=Ke,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],Vn.push(2*(5*s+n)),Qn.push((e+1)*(e+2)/2%64);let i=Ci;for(let o=0;o<7;o++)t=(t<<Ke^(t>>Oi)*Di)%Ni,t&Li&&(i^=Ke<<(Ke<<BigInt(o))-Ke);Xn.push(i)}const[Pi,Mi]=x.split(Xn,!0),bn=(e,t,n)=>n>32?x.rotlBH(e,t,n):x.rotlSH(e,t,n),pn=(e,t,n)=>n>32?x.rotlBL(e,t,n):x.rotlSL(e,t,n);function Fi(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){const a=(r+8)%10,c=(r+2)%10,d=n[c],u=n[c+1],l=bn(d,u,1)^n[a],f=pn(d,u,1)^n[a+1];for(let _=0;_<50;_+=10)e[r+_]^=l,e[r+_+1]^=f}let i=e[2],o=e[3];for(let r=0;r<24;r++){const a=Qn[r],c=bn(i,o,a),d=pn(i,o,a),u=Vn[r];i=e[u],o=e[u+1],e[u]=c,e[u+1]=d}for(let r=0;r<50;r+=10){for(let a=0;a<10;a++)n[a]=e[r+a];for(let a=0;a<10;a++)e[r+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=Pi[s],e[1]^=Mi[s]}n.fill(0)}class pt extends Yt{constructor(t,n,s,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=s,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,V.number(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ys(this.state)}keccak(){Fi(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){V.exists(this);const{blockLen:n,state:s}=this;t=Ye(t);const i=t.length;for(let o=0;o<i;){const r=Math.min(n-this.pos,i-o);for(let a=0;a<r;a++)s[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:s,blockLen:i}=this;t[s]^=n,n&128&&s===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){V.exists(this,!1),V.bytes(t),this.finish();const n=this.state,{blockLen:s}=this;for(let i=0,o=t.length;i<o;){this.posOut>=s&&this.keccak();const r=Math.min(s-this.posOut,o-i);t.set(n.subarray(this.posOut,this.posOut+r),i),this.posOut+=r,i+=r}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return V.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(V.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:s,outputLen:i,rounds:o,enableXOF:r}=this;return t||(t=new pt(n,s,i,r,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=s,t.outputLen=i,t.enableXOF=r,t.destroyed=this.destroyed,t}}const we=(e,t,n)=>Ze(()=>new pt(t,e,n));we(6,144,224/8);const Oe=we(6,136,256/8);we(6,104,384/8);we(6,72,512/8);we(1,144,224/8);we(1,136,256/8);we(1,104,384/8);we(1,72,512/8);const Jn=(e,t,n)=>ni((s={})=>new pt(t,e,s.dkLen===void 0?n:s.dkLen,!0));Jn(31,168,128/8);Jn(31,136,256/8);class Yn extends Yt{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,V.hash(t);const s=Ye(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(s.length>i?t.create().update(s).digest():s);for(let r=0;r<o.length;r++)o[r]^=54;this.iHash.update(o),this.oHash=t.create();for(let r=0;r<o.length;r++)o[r]^=106;this.oHash.update(o),o.fill(0)}update(t){return V.exists(this),this.iHash.update(t),this}digestInto(t){V.exists(this),V.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:i,destroyed:o,blockLen:r,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=r,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Zt=(e,t,n)=>new Yn(e,t).update(n).digest();Zt.create=(e,t)=>new Yn(e,t);const[qi,Gi]=x.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ue=new Uint32Array(80),he=new Uint32Array(80);class en extends Wn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:s,Bl:i,Ch:o,Cl:r,Dh:a,Dl:c,Eh:d,El:u,Fh:l,Fl:f,Gh:_,Gl:T,Hh:v,Hl:U}=this;return[t,n,s,i,o,r,a,c,d,u,l,f,_,T,v,U]}set(t,n,s,i,o,r,a,c,d,u,l,f,_,T,v,U){this.Ah=t|0,this.Al=n|0,this.Bh=s|0,this.Bl=i|0,this.Ch=o|0,this.Cl=r|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=u|0,this.Fh=l|0,this.Fl=f|0,this.Gh=_|0,this.Gl=T|0,this.Hh=v|0,this.Hl=U|0}process(t,n){for(let y=0;y<16;y++,n+=4)ue[y]=t.getUint32(n),he[y]=t.getUint32(n+=4);for(let y=16;y<80;y++){const h=ue[y-15]|0,w=he[y-15]|0,k=x.rotrSH(h,w,1)^x.rotrSH(h,w,8)^x.shrSH(h,w,7),z=x.rotrSL(h,w,1)^x.rotrSL(h,w,8)^x.shrSL(h,w,7),B=ue[y-2]|0,S=he[y-2]|0,b=x.rotrSH(B,S,19)^x.rotrBH(B,S,61)^x.shrSH(B,S,6),m=x.rotrSL(B,S,19)^x.rotrBL(B,S,61)^x.shrSL(B,S,6),g=x.add4L(z,m,he[y-7],he[y-16]),N=x.add4H(g,k,b,ue[y-7],ue[y-16]);ue[y]=N|0,he[y]=g|0}let{Ah:s,Al:i,Bh:o,Bl:r,Ch:a,Cl:c,Dh:d,Dl:u,Eh:l,El:f,Fh:_,Fl:T,Gh:v,Gl:U,Hh:$,Hl:O}=this;for(let y=0;y<80;y++){const h=x.rotrSH(l,f,14)^x.rotrSH(l,f,18)^x.rotrBH(l,f,41),w=x.rotrSL(l,f,14)^x.rotrSL(l,f,18)^x.rotrBL(l,f,41),k=l&_^~l&v,z=f&T^~f&U,B=x.add5L(O,w,z,Gi[y],he[y]),S=x.add5H(B,$,h,k,qi[y],ue[y]),b=B|0,m=x.rotrSH(s,i,28)^x.rotrBH(s,i,34)^x.rotrBH(s,i,39),g=x.rotrSL(s,i,28)^x.rotrBL(s,i,34)^x.rotrBL(s,i,39),N=s&o^s&a^o&a,M=i&r^i&c^r&c;$=v|0,O=U|0,v=_|0,U=T|0,_=l|0,T=f|0,{h:l,l:f}=x.add(d|0,u|0,S|0,b|0),d=a|0,u=c|0,a=o|0,c=r|0,o=s|0,r=i|0;const ne=x.add3L(b,g,M);s=x.add3H(ne,S,m,N),i=ne|0}({h:s,l:i}=x.add(this.Ah|0,this.Al|0,s|0,i|0)),{h:o,l:r}=x.add(this.Bh|0,this.Bl|0,o|0,r|0),{h:a,l:c}=x.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l:u}=x.add(this.Dh|0,this.Dl|0,d|0,u|0),{h:l,l:f}=x.add(this.Eh|0,this.El|0,l|0,f|0),{h:_,l:T}=x.add(this.Fh|0,this.Fl|0,_|0,T|0),{h:v,l:U}=x.add(this.Gh|0,this.Gl|0,v|0,U|0),{h:$,l:O}=x.add(this.Hh|0,this.Hl|0,$|0,O|0),this.set(s,i,o,r,a,c,d,u,l,f,_,T,v,U,$,O)}roundClean(){ue.fill(0),he.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Ri extends en{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Ki extends en{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Zn=Ze(()=>new en);Ze(()=>new Ri);Ze(()=>new Ki);async function Wi(e){var t,n;const{params:s,method:i,url:o,headers:r,body:a,overrides:c}=e,d={headers:r,method:i,url:o,params:s,data:a,withCredentials:(t=c==null?void 0:c.WITH_CREDENTIALS)!=null?t:!0,adapter:(n=c==null?void 0:c.ADAPTER)!=null?n:void 0};try{const u=await Bs(d);return{status:u.status,statusText:u.statusText,data:u.data,headers:u.headers,config:u.config}}catch(u){const l=u;if(l.response)return l.response;throw u}}var es=Object.defineProperty,ji=Object.getOwnPropertyDescriptor,gt=(e,t)=>{for(var n in t)es(e,n,{get:t[n],enumerable:!0})},I=(e,t,n,s)=>{for(var i=s>1?void 0:s?ji(t,n):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(i=(s?r(t,n,i):r(i))||i);return s&&i&&es(t,n,i),i},Vi=/^m(\/[0-9]+')+$/,ts=e=>e.replace("'",""),Qi="ed25519 seed",Xi=2147483648,Ji=e=>{const n=Zt.create(Zn,Qi).update(Rn(e)).digest(),s=n.slice(0,32),i=n.slice(32);return{key:s,chainCode:i}},Yi=({key:e,chainCode:t},n)=>{const s=new ArrayBuffer(4);new DataView(s).setUint32(0,n);const i=new Uint8Array(s),o=new Uint8Array([0]),r=new Uint8Array([...o,...e,...i]),a=Zt.create(Zn,t).update(r).digest(),c=a.slice(0,32),d=a.slice(32);return{key:c,chainCode:d}},Zi=e=>Vi.test(e)?!e.split("/").slice(1).map(ts).some(Number.isNaN):!1,er=(e,t,n=Xi)=>{if(!Zi(e))throw new Error("Invalid derivation path");const{key:s,chainCode:i}=Ji(t);return e.split("/").slice(1).map(ts).map(r=>parseInt(r,10)).reduce((r,a)=>Yi(r,a+n),{key:s,chainCode:i})},tr="1.20.0";async function nr(e){return new Promise(t=>{setTimeout(t,e)})}var gn="/v1";function sr(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(gn)||(t=`${t}${gn}`),t}var ns=2e5,ss=20,ir=20,rr="0x1::aptos_coin::AptosCoin";function wt(e){let t,n,s;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,s=e.tags):t=e,(i,o,r)=>{if(r.value!=null)r.value=wn(r.value,t,n,s);else if(r.get!=null)r.get=wn(r.get,t,n,s);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function is(e,t){return wt({ttlMs:e,hashFunction:t})}var dt=new Map;function or(e){const t=new Set;for(const n of e){const s=dt.get(n);if(s)for(const i of s)t.has(i)||(i.clear(),t.add(i))}return t.size}function wn(e,t,n=0,s){const i=Symbol("__memoized_map__");return function(...o){let r;const a=this;a.hasOwnProperty(i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[i];if(Array.isArray(s))for(const d of s)dt.has(d)?dt.get(d).push(c):dt.set(d,[c]);if(t||o.length>0||n>0){let d;t===!0?d=o.map(f=>f.toString()).join("!"):t?d=t.apply(a,o):d=o[0];const u=`${d}__timestamp`;let l=!1;if(n>0)if(!c.has(u))l=!0;else{const f=c.get(u);l=Date.now()-f>n}c.has(d)&&!l?r=c.get(d):(r=e.apply(a,o),c.set(d,r),n>0&&c.set(u,Date.now()))}else{const d=a;c.has(d)?r=c.get(d):(r=e.apply(a,o),c.set(d,r))}return r}}var rs=class extends Error{constructor(e,t,n){super(n),this.name="AptosApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.data=t.data,this.request=e}},ar={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function cr(e,t,n,s,i,o){const r={...o==null?void 0:o.HEADERS,"x-aptos-client":`aptos-ts-sdk/${tr}`,"content-type":s??"application/json"};return o!=null&&o.TOKEN&&(r.Authorization=`Bearer ${o==null?void 0:o.TOKEN}`),await Wi({url:e,method:t,body:n,params:i,headers:r,overrides:o})}async function os(e){const{url:t,endpoint:n,method:s,body:i,contentType:o,params:r,overrides:a}=e,c=`${t}/${n??""}`,d=await cr(c,s,i,o,r,a),u={status:d.status,statusText:d.statusText,data:d.data,headers:d.headers,config:d.config,url:c};if(u.status>=200&&u.status<300)return u;const l=ar[u.status];throw new rs(e,u,l??"Generic Error")}async function W(e){return await os({...e,method:"GET"})}async function We(e){return await os({...e,method:"POST"})}async function mn(e){const t=[];let n;const s=e.params;for(;;){s.start=n;const i=await W({url:e.url,endpoint:e.endpoint,params:s,originMethod:e.originMethod,overrides:e.overrides});if(n=i.headers["x-aptos-cursor"],delete i.headers,t.push(...i.data),n==null)break}return t}var lr={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},dr={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://localhost:8080/v1"},p=class{static fromBuffer(e){return p.fromUint8Array(e)}static fromUint8Array(e){return new p(Gn(e))}static ensure(e){return typeof e=="string"?new p(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(Rn(this.noPrefix()))}},H={};gt(H,{AccountAddress:()=>E,AccountAuthenticator:()=>ye,AccountAuthenticatorEd25519:()=>rn,AccountAuthenticatorMultiEd25519:()=>on,ArgumentABI:()=>it,AuthenticationKey:()=>xe,ChainId:()=>Et,ChangeSet:()=>kr,Ed25519PublicKey:()=>J,Ed25519Signature:()=>te,EntryFunction:()=>me,EntryFunctionABI:()=>Ne,FeePayerRawTransaction:()=>Ut,Identifier:()=>G,Module:()=>ds,ModuleId:()=>ve,MultiAgentRawTransaction:()=>At,MultiEd25519PublicKey:()=>et,MultiEd25519Signature:()=>mt,MultiSig:()=>dn,MultiSigTransactionPayload:()=>ln,RawTransaction:()=>Ee,RawTransactionWithData:()=>un,RotationProofChallenge:()=>zr,Script:()=>Tt,ScriptABI:()=>Dt,SignedTransaction:()=>tt,StructTag:()=>ge,Transaction:()=>us,TransactionArgument:()=>Z,TransactionArgumentAddress:()=>Lt,TransactionArgumentBool:()=>Nt,TransactionArgumentU128:()=>$t,TransactionArgumentU16:()=>It,TransactionArgumentU256:()=>Ct,TransactionArgumentU32:()=>zt,TransactionArgumentU64:()=>Ht,TransactionArgumentU8:()=>kt,TransactionArgumentU8Vector:()=>Ot,TransactionAuthenticator:()=>De,TransactionAuthenticatorEd25519:()=>vt,TransactionAuthenticatorFeePayer:()=>sn,TransactionAuthenticatorMultiAgent:()=>nn,TransactionAuthenticatorMultiEd25519:()=>xt,TransactionPayload:()=>nt,TransactionPayloadEntryFunction:()=>St,TransactionPayloadMultisig:()=>hn,TransactionPayloadScript:()=>Bt,TransactionScriptABI:()=>Pt,TypeArgumentABI:()=>st,TypeTag:()=>R,TypeTagAddress:()=>be,TypeTagBool:()=>Ue,TypeTagParser:()=>Ge,TypeTagParserError:()=>ls,TypeTagSigner:()=>an,TypeTagStruct:()=>pe,TypeTagU128:()=>Se,TypeTagU16:()=>Pe,TypeTagU256:()=>Fe,TypeTagU32:()=>Me,TypeTagU64:()=>Be,TypeTagU8:()=>ie,TypeTagVector:()=>qe,UserTransaction:()=>fn,WriteSet:()=>Ir,objectStructTag:()=>Ur,optionStructTag:()=>Ar,stringStructTag:()=>cn});var ur={};gt(ur,{Deserializer:()=>tn,Serializer:()=>C,bcsSerializeBool:()=>vr,bcsSerializeBytes:()=>fe,bcsSerializeFixedBytes:()=>Tr,bcsSerializeStr:()=>xr,bcsSerializeU128:()=>wr,bcsSerializeU16:()=>pr,bcsSerializeU256:()=>mr,bcsSerializeU32:()=>gr,bcsSerializeU8:()=>Wt,bcsSerializeUint64:()=>br,bcsToBytes:()=>se,deserializeVector:()=>K,serializeVector:()=>q,serializeVectorWithFunc:()=>yr});var hr=2**8-1,fr=2**16-1,Ve=2**32-1,as=BigInt(2**64)-BigInt(1),cs=BigInt(2**128)-BigInt(1),_r=BigInt(2**256)-BigInt(1),C=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){const t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,n){this.ensureBufferWillHandleSize(t);const s=new DataView(this.buffer,this.offset);e.apply(s,[0,n,!0]),this.offset+=t}serializeStr(e){const t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");const t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){const t=BigInt(e.toString())&BigInt(Ve),n=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(n))}serializeU128(e){const t=BigInt(e.toString())&as,n=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(n)}serializeU256(e){const t=BigInt(e.toString())&cs,n=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(n)}serializeU32AsUleb128(e){let t=e;const n=[];for(;t>>>7;)n.push(t&127|128),t>>>=7;n.push(t),this.serialize(new Uint8Array(n))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};I([Ae(0,hr)],C.prototype,"serializeU8",1);I([Ae(0,fr)],C.prototype,"serializeU16",1);I([Ae(0,Ve)],C.prototype,"serializeU32",1);I([Ae(BigInt(0),as)],C.prototype,"serializeU64",1);I([Ae(BigInt(0),cs)],C.prototype,"serializeU128",1);I([Ae(BigInt(0),_r)],C.prototype,"serializeU256",1);I([Ae(0,Ve)],C.prototype,"serializeU32AsUleb128",1);function Ae(e,t,n){return(s,i,o)=>{const r=o.value;return o.value=function(c){const d=BigInt(c.toString());if(d>BigInt(t.toString())||d<BigInt(e.toString()))throw new Error(n||"Value is out of range");r.apply(this,[c])},o}}var tn=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){const e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){const e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){const e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){const e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){const e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<Ve;){const n=this.deserializeU8();if(e|=BigInt(n&127)<<BigInt(t),!(n&128))break;t+=7}if(e>Ve)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};function q(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function yr(e,t){const n=new C;n.serializeU32AsUleb128(e.length);const s=n[t];return e.forEach(i=>{s.call(n,i)}),n.getBytes()}function K(e,t){const n=e.deserializeUleb128AsU32(),s=[];for(let i=0;i<n;i+=1)s.push(t.deserialize(e));return s}function se(e){const t=new C;return e.serialize(t),t.getBytes()}function br(e){const t=new C;return t.serializeU64(e),t.getBytes()}function Wt(e){const t=new C;return t.serializeU8(e),t.getBytes()}function pr(e){const t=new C;return t.serializeU16(e),t.getBytes()}function gr(e){const t=new C;return t.serializeU32(e),t.getBytes()}function wr(e){const t=new C;return t.serializeU128(e),t.getBytes()}function mr(e){const t=new C;return t.serializeU256(e),t.getBytes()}function vr(e){const t=new C;return t.serializeBool(e),t.getBytes()}function xr(e){const t=new C;return t.serializeStr(e),t.getBytes()}function fe(e){const t=new C;return t.serializeBytes(e),t.getBytes()}function Tr(e){const t=new C;return t.serializeFixedBytes(e),t.getBytes()}var X=class{constructor(e){if(e.length!==X.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=p.ensure(e);t.noPrefix().length%2!==0&&(t=new p(`0${t.noPrefix()}`));const n=t.toUint8Array();if(n.length>X.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(n.length===X.LENGTH)return new X(n);const s=new Uint8Array(X.LENGTH);return s.set(n,X.LENGTH-n.length),new X(s)}static isValid(e){if(e==="")return!1;let t=p.ensure(e);return t.noPrefix().length%2!==0&&(t=new p(`0${t.noPrefix()}`)),t.toUint8Array().length<=X.LENGTH}toHexString(){return p.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new X(e.deserializeFixedBytes(X.LENGTH))}static standardizeAddress(e){const t=e.toLowerCase();return`0x${(t.startsWith("0x")?t.slice(2):t).padStart(64,"0")}`}},E=X;E.LENGTH=32;E.CORE_CODE_ADDRESS=X.fromHex("0x1");var ut=class{constructor(e){if(e.length!==ut.LENGTH)throw new Error(`Ed25519PublicKey length should be ${ut.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new ut(t)}},J=ut;J.LENGTH=32;var ht=class{constructor(e){if(this.value=e,e.length!==ht.LENGTH)throw new Error(`Ed25519Signature length should be ${ht.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){const t=e.deserializeBytes();return new ht(t)}},te=ht;te.LENGTH=64;var jt=32,et=class{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>jt)throw new Error(`"threshold" cannot be larger than ${jt}`)}toBytes(){const e=new Uint8Array(this.public_keys.length*J.LENGTH+1);return this.public_keys.forEach((t,n)=>{e.set(t.value,n*J.LENGTH)}),e[this.public_keys.length*J.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t[t.length-1],s=[];for(let i=0;i<t.length-1;i+=J.LENGTH){const o=i;s.push(new J(t.subarray(o,o+J.LENGTH)))}return new et(s,n)}},je=class{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==je.BITMAP_LEN)throw new Error(`"bitmap" length should be ${je.BITMAP_LEN}`)}toBytes(){const e=new Uint8Array(this.signatures.length*te.LENGTH+je.BITMAP_LEN);return this.signatures.forEach((t,n)=>{e.set(t.value,n*te.LENGTH)}),e.set(this.bitmap,this.signatures.length*te.LENGTH),e}static createBitmap(e){const n=new Uint8Array([0,0,0,0]),s=new Set;return e.forEach(i=>{if(i>=jt)throw new Error(`Invalid bit value ${i}.`);if(s.has(i))throw new Error("Duplicated bits detected.");s.add(i);const o=Math.floor(i/8);let r=n[o];r|=128>>i%8,n[o]=r}),n}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){const t=e.deserializeBytes(),n=t.subarray(t.length-4),s=[];for(let i=0;i<t.length-n.length;i+=te.LENGTH){const o=i;s.push(new te(t.subarray(o,o+te.LENGTH)))}return new je(s,n)}},mt=je;mt.BITMAP_LEN=4;var De=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return vt.load(e);case 1:return xt.load(e);case 2:return nn.load(e);case 3:return sn.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}},vt=class extends De{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=J.deserialize(e),n=te.deserialize(e);return new vt(t,n)}},xt=class extends De{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=et.deserialize(e),n=mt.deserialize(e);return new xt(t,n)}},nn=class extends De{constructor(e,t,n){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),q(this.secondary_signer_addresses,e),q(this.secondary_signers,e)}static load(e){const t=ye.deserialize(e),n=K(e,E),s=K(e,ye);return new nn(t,n,s)}},sn=class extends De{constructor(e,t,n,s){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n,this.fee_payer=s}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),q(this.secondary_signer_addresses,e),q(this.secondary_signers,e),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){const t=ye.deserialize(e),n=K(e,E),s=K(e,ye),i=E.deserialize(e),o=ye.deserialize(e),r={address:i,authenticator:o};return new sn(t,n,s,r)}},ye=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return rn.load(e);case 1:return on.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}},rn=class extends ye{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=J.deserialize(e),n=te.deserialize(e);return new rn(t,n)}},on=class extends ye{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){const t=et.deserialize(e),n=mt.deserialize(e);return new on(t,n)}},G=class{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){const t=e.deserializeStr();return new G(t)}},R=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Ue.load(e);case 1:return ie.load(e);case 2:return Be.load(e);case 3:return Se.load(e);case 4:return be.load(e);case 5:return an.load(e);case 6:return qe.load(e);case 7:return pe.load(e);case 8:return Pe.load(e);case 9:return Me.load(e);case 10:return Fe.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}},Ue=class extends R{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new Ue}},ie=class extends R{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new ie}},Pe=class extends R{serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new Pe}},Me=class extends R{serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new Me}},Be=class extends R{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new Be}},Se=class extends R{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new Se}},Fe=class extends R{serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new Fe}},be=class extends R{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new be}},an=class extends R{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new an}},qe=class extends R{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){const t=R.deserialize(e);return new qe(t)}},pe=class extends R{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){const t=ge.deserialize(e);return new pe(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===E.CORE_CODE_ADDRESS.toHexString()}},ge=class{constructor(e,t,n,s){this.address=e,this.module_name=t,this.name=n,this.type_args=s}static fromString(e){const t=new Ge(e).parseTypeTag();return new ge(t.value.address,t.value.module_name,t.value.name,t.value.type_args)}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),q(this.type_args,e)}static deserialize(e){const t=E.deserialize(e),n=G.deserialize(e),s=G.deserialize(e),i=K(e,R);return new ge(t,n,s,i)}},cn=new ge(E.fromHex("0x1"),new G("string"),new G("String"),[]);function Ar(e){return new ge(E.fromHex("0x1"),new G("option"),new G("Option"),[e])}function Ur(e){return new ge(E.fromHex("0x1"),new G("object"),new G("Object"),[e])}function _e(e){throw new ls(e)}function vn(e){return!!e.match(/\s/)}function xn(e){return!!e.match(/[_A-Za-z0-9]/g)}function Br(e){return!!e.match(/T\d+/g)}function Sr(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];_e("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(vn(n)){let s="";for(let i=t;i<e.length;i+=1){const o=e[i];if(vn(o))s=`${s}${o}`;else break}return[["SPACE",s],s.length]}else if(xn(n)){let s="";for(let i=t;i<e.length;i+=1){const o=e[i];if(xn(o))s=`${s}${o}`;else break}return Br(s)?[["GENERIC",s],s.length]:[["IDENT",s],s.length]}}throw new Error("Unrecognized token.")}function Er(e){let t=0;const n=[];for(;t<e.length;){const[s,i]=Sr(e,t);s[0]!=="SPACE"&&n.push(s),t+=i}return n}var Ge=class{constructor(e,t){this.typeTags=[],this.tokens=Er(e),this.typeTags=t||[]}consume(e){const t=this.tokens.shift();(!t||t[1]!==e)&&_e("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"&&this.consumeWholeGeneric(),this.tokens.shift();this.consume(">")}parseCommaList(e,t){const n=[];for(this.tokens.length<=0&&_e("Invalid type tag.");this.tokens[0][1]!==e&&(n.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&_e("Invalid type tag.");return n}parseTypeTag(){this.tokens.length===0&&_e("Invalid type tag.");const[e,t]=this.tokens.shift();if(t==="u8")return new ie;if(t==="u16")return new Pe;if(t==="u32")return new Me;if(t==="u64")return new Be;if(t==="u128")return new Se;if(t==="u256")return new Fe;if(t==="bool")return new Ue;if(t==="address")return new be;if(t==="vector"){this.consume("<");const n=this.parseTypeTag();return this.consume(">"),new qe(n)}if(t==="string")return new pe(cn);if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){const n=E.fromHex(t);this.consume("::");const[s,i]=this.tokens.shift();s!=="IDENT"&&_e("Invalid type tag."),this.consume("::");const[o,r]=this.tokens.shift();if(o!=="IDENT"&&_e("Invalid type tag."),E.CORE_CODE_ADDRESS.toHexString()===n.toHexString()&&i==="object"&&r==="Object")return this.consumeWholeGeneric(),new be;let a=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),a=this.parseCommaList(">",!0),this.consume(">"));const c=new ge(n,new G(i),new G(r),a);return new pe(c)}if(e==="GENERIC"){this.typeTags.length===0&&_e("Can't convert generic type since no typeTags were specified.");const n=parseInt(t.substring(1),10);return new Ge(this.typeTags[n]).parseTypeTag()}throw new Error("Invalid type tag.")}},ls=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}},Ee=class{constructor(e,t,n,s,i,o,r){this.sender=e,this.sequence_number=t,this.payload=n,this.max_gas_amount=s,this.gas_unit_price=i,this.expiration_timestamp_secs=o,this.chain_id=r}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){const t=E.deserialize(e),n=e.deserializeU64(),s=nt.deserialize(e),i=e.deserializeU64(),o=e.deserializeU64(),r=e.deserializeU64(),a=Et.deserialize(e);return new Ee(t,n,s,i,o,r,a)}},Tt=class{constructor(e,t,n){this.code=e,this.ty_args=t,this.args=n}serialize(e){e.serializeBytes(this.code),q(this.ty_args,e),q(this.args,e)}static deserialize(e){const t=e.deserializeBytes(),n=K(e,R),s=K(e,Z);return new Tt(t,n,s)}},me=class{constructor(e,t,n,s){this.module_name=e,this.function_name=t,this.ty_args=n,this.args=s}static natural(e,t,n,s){return new me(ve.fromStr(e),new G(t),n,s)}static natual(e,t,n,s){return me.natural(e,t,n,s)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),q(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){const t=ve.deserialize(e),n=G.deserialize(e),s=K(e,R),i=e.deserializeUleb128AsU32(),o=[];for(let a=0;a<i;a+=1)o.push(e.deserializeBytes());const r=o;return new me(t,n,s,r)}},ln=class{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new ln(me.deserialize(e))}},dn=class{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){const t=E.deserialize(e),n=e.deserializeBool();let s;return n&&(s=ln.deserialize(e)),new dn(t,s)}},ds=class{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){const t=e.deserializeBytes();return new ds(t)}},ve=class{constructor(e,t){this.address=e,this.name=t}static fromStr(e){const t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new ve(E.fromHex(new p(t[0])),new G(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){const t=E.deserialize(e),n=G.deserialize(e);return new ve(t,n)}},kr=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}},Ir=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}},tt=class{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){const t=Ee.deserialize(e),n=De.deserialize(e);return new tt(t,n)}},un=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return At.load(e);case 1:return Ut.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},At=class extends un{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),q(this.secondary_signer_addresses,e)}static load(e){const t=Ee.deserialize(e),n=K(e,E);return new At(t,n)}},Ut=class extends un{constructor(e,t,n){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=n}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),q(this.secondary_signer_addresses,e),this.fee_payer_address.serialize(e)}static load(e){const t=Ee.deserialize(e),n=K(e,E),s=E.deserialize(e);return new Ut(t,n,s)}},nt=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Bt.load(e);case 2:return St.load(e);case 3:return hn.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},Bt=class extends nt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){const t=Tt.deserialize(e);return new Bt(t)}},St=class extends nt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){const t=me.deserialize(e);return new St(t)}},hn=class extends nt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=dn.deserialize(e);return new hn(t)}},Et=class{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){const t=e.deserializeU8();return new Et(t)}},Z=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return kt.load(e);case 1:return Ht.load(e);case 2:return $t.load(e);case 3:return Lt.load(e);case 4:return Ot.load(e);case 5:return Nt.load(e);case 6:return It.load(e);case 7:return zt.load(e);case 8:return Ct.load(e);default:throw new Error(`Unknown variant index for TransactionArgument: ${t}`)}}},kt=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){const t=e.deserializeU8();return new kt(t)}},It=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){const t=e.deserializeU16();return new It(t)}},zt=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){const t=e.deserializeU32();return new zt(t)}},Ht=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){const t=e.deserializeU64();return new Ht(t)}},$t=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){const t=e.deserializeU128();return new $t(t)}},Ct=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){const t=e.deserializeU256();return new Ct(t)}},Lt=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){const t=E.deserialize(e);return new Lt(t)}},Ot=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){const t=e.deserializeBytes();return new Ot(t)}},Nt=class extends Z{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){const t=e.deserializeBool();return new Nt(t)}},us=class{getHashSalt(){const e=Oe.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return fn.load(e);default:throw new Error(`Unknown variant index for Transaction: ${t}`)}}},fn=class extends us{constructor(e){super(),this.value=e}hash(){const e=Oe.create();return e.update(this.getHashSalt()),e.update(se(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new fn(tt.deserialize(e))}},st=class{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){const t=e.deserializeStr();return new st(t)}},it=class{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){const t=e.deserializeStr(),n=R.deserialize(e);return new it(t,n)}},Dt=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Pt.load(e);case 1:return Ne.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},Pt=class extends Dt{constructor(e,t,n,s,i){super(),this.name=e,this.doc=t,this.code=n,this.ty_args=s,this.args=i}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),q(this.ty_args,e),q(this.args,e)}static load(e){const t=e.deserializeStr(),n=e.deserializeStr(),s=e.deserializeBytes(),i=K(e,st),o=K(e,it);return new Pt(t,n,s,i,o)}},Ne=class extends Dt{constructor(e,t,n,s,i){super(),this.name=e,this.module_name=t,this.doc=n,this.ty_args=s,this.args=i}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),q(this.ty_args,e),q(this.args,e)}static load(e){const t=e.deserializeStr(),n=ve.deserialize(e),s=e.deserializeStr(),i=K(e,st),o=K(e,it);return new Ne(t,n,s,i,o)}},ke=class{constructor(e){if(e.length!==ke.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){const t=e.toBytes(),n=new Uint8Array(t.length+1);n.set(t),n.set([ke.MULTI_ED25519_SCHEME],t.length);const s=Oe.create();return s.update(n),new ke(s.digest())}static fromEd25519PublicKey(e){const t=e.value,n=new Uint8Array(t.length+1);n.set(t),n.set([ke.ED25519_SCHEME],t.length);const s=Oe.create();return s.update(n),new ke(s.digest())}derivedAddress(){return p.fromUint8Array(this.bytes)}},xe=ke;xe.LENGTH=32;xe.MULTI_ED25519_SCHEME=1;xe.ED25519_SCHEME=0;xe.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var zr=class{constructor(e,t,n,s,i,o,r){this.accountAddress=e,this.moduleName=t,this.structName=n,this.sequenceNumber=s,this.originator=i,this.currentAuthKey=o,this.newPublicKey=r}serialize(e){this.accountAddress.serialize(e),e.serializeStr(this.moduleName),e.serializeStr(this.structName),e.serializeU64(this.sequenceNumber),this.originator.serialize(e),this.currentAuthKey.serialize(e),e.serializeBytes(this.newPublicKey)}},ft=class{static fromAptosAccountObject(e){return new ft(p.ensure(e.privateKeyHex).toUint8Array(),e.address)}static isValidPath(e){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e)}static fromDerivePath(e,t){if(!ft.isValidPath(e))throw new Error("Invalid derivation path");const n=t.trim().split(/\s+/).map(i=>i.toLowerCase()).join(" "),{key:s}=er(e,Gn($n(n)));return new ft(s)}constructor(e,t){e?this.signingKey=ot.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=ot.sign.keyPair(),this.accountAddress=p.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){const e=new J(this.signingKey.publicKey);return xe.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){const n=se(E.fromHex(e)),s=new Uint8Array([...n,...t,xe.DERIVE_RESOURCE_ACCOUNT_SCHEME]),i=Oe.create();return i.update(s),p.fromUint8Array(i.digest())}static getCollectionID(e,t){const n=new TextEncoder().encode(`${e}::${t}`),s=hi.create();return s.update(n),p.fromUint8Array(s.digest())}pubKey(){return p.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){const t=ot.sign.detached(e,this.signingKey.secretKey);return p.fromUint8Array(t)}signHexString(e){const t=p.ensure(e).toUint8Array();return this.signBuffer(t)}verifySignature(e,t){const n=p.ensure(e).toUint8Array(),s=p.ensure(t).toUint8Array();return ot.sign.detached.verify(n,s,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:p.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},Vt=ft;I([wt()],Vt.prototype,"authKey",1);var rt=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Hr=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,$r=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,hs=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,Cr=`
    query getAccountCoinsDataCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,Lr=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,Or=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${Hr}
${$r}`,Nr=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,Dr=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,Pr=`
    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {
  account_transactions(
    where: $where_condition
    order_by: $order_by
    limit: $limit
    offset: $offset
  ) {
    token_activities_v2 {
      ...TokenActivitiesFields
    }
    transaction_version
    account_address
  }
}
    ${hs}`,Mr=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {
  current_collections_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,Fr=`
    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,qr=`
    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,Gr=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,Rr=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,Kr=`
    query getNumberOfDelegators($poolAddress: String) {
  num_active_delegator_per_pool(
    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: "0"}}
    distinct_on: pool_address
  ) {
    num_active_delegator
    pool_address
  }
}
    `,Wr=`
    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${rt}`,jr=`
    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${rt}`,Vr=`
    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${hs}`,Qr=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,Xr=`
    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${rt}`,Jr=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Yr=`
    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${rt}`,Zr=`
    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${rt}`,eo=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,to=`
    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {
  user_transactions(
    order_by: $order_by
    where: $where_condition
    limit: $limit
    offset: $offset
  ) {
    version
  }
}
    `;function Mt(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function fs(e){if(Mt(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function He(e){if(Mt(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function $e(e){return Mt(e,["number","bigint","string"]),BigInt(e)}function no(e,t,n){_n(e,t,n)}function _n(e,t,n,s){if(t instanceof Ue)n.serializeBool(fs(e));else if(t instanceof ie)n.serializeU8(He(e));else if(t instanceof Pe)n.serializeU16(He(e));else if(t instanceof Me)n.serializeU32(He(e));else if(t instanceof Be)n.serializeU64($e(e));else if(t instanceof Se)n.serializeU128($e(e));else if(t instanceof Fe)n.serializeU256($e(e));else if(t instanceof be)_s(e,n);else if(t instanceof qe)so(e,t,n);else if(t instanceof pe)io(e,t,n);else throw new Error("Unsupported arg type.")}function _s(e,t){let n;if(typeof e=="string"||e instanceof p)n=E.fromHex(e);else if(e instanceof E)n=e;else throw new Error("Invalid account address.");n.serialize(t)}function so(e,t,n,s){if(t.value instanceof ie){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(e instanceof p){n.serializeBytes(e.toUint8Array());return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(i=>_n(i,t.value,n))}function io(e,t,n,s){const{address:i,module_name:o,name:r,type_args:a}=t.value,c=`${p.fromUint8Array(i.address).toShortString()}::${o.value}::${r.value}`;if(c==="0x1::string::String")Mt(e,["string"]),n.serializeStr(e);else if(c==="0x1::object::Object")_s(e,n);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);ro(e,a[0],n)}else throw new Error("Unsupported struct type in function argument")}function ro(e,t,n,s){e==null?n.serializeU32AsUleb128(0):(n.serializeU32AsUleb128(1),_n(e,t,n))}function oo(e,t){if(t instanceof Ue)return new Nt(fs(e));if(t instanceof ie)return new kt(He(e));if(t instanceof Pe)return new It(He(e));if(t instanceof Me)return new zt(He(e));if(t instanceof Be)return new Ht($e(e));if(t instanceof Se)return new $t($e(e));if(t instanceof Fe)return new Ct($e(e));if(t instanceof be){let n;if(typeof e=="string"||e instanceof p)n=E.fromHex(e);else if(e instanceof E)n=e;else throw new Error("Invalid account address.");return new Lt(n)}if(t instanceof qe&&t.value instanceof ie){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new Ot(e)}throw new Error("Unknown type for TransactionArgument.")}var ao="APTOS::RawTransaction",Tn="APTOS::RawTransactionWithData",Qe=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,n){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,n)}static getSigningMessage(e){const t=Oe.create();if(e instanceof Ee)t.update(ao);else if(e instanceof At)t.update(Tn);else if(e instanceof Ut)t.update(Tn);else throw new Error("Unknown transaction type.");const n=t.digest(),s=se(e),i=new Uint8Array(n.length+s.length);return i.set(n),i.set(s,n.length),i}},Gt=class extends Qe{constructor(e,t,n){super(e,n),this.publicKey=t}rawToSigned(e){const t=Qe.getSigningMessage(e),n=this.signingFunction(t),s=new vt(new J(this.publicKey),n);return new tt(e,s)}sign(e){return se(this.rawToSigned(e))}},co=class extends Qe{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){const t=Qe.getSigningMessage(e),n=this.signingFunction(t),s=new xt(this.publicKey,n);return new tt(e,s)}sign(e){return se(this.rawToSigned(e))}},Qt=class{constructor(e,t){this.abiMap=new Map,e.forEach(n=>{const s=new tn(n),i=Dt.deserialize(s);let o;if(i instanceof Ne){const r=i,{address:a,name:c}=r.module_name;o=`${p.fromUint8Array(a.address).toShortString()}::${c.value}::${r.name}`}else o=i.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,i)}),this.builderConfig={maxGasAmount:BigInt(ns),expSecFromNow:ss,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,s)=>{const i=new C;return no(n,e[s].type_tag,i),i.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((n,s)=>oo(n,e[s].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,n){const s=t.map(r=>new Ge(r).parseTypeTag());let i;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);const o=this.abiMap.get(e);if(o instanceof Ne){const r=o,a=Qt.toBCSArgs(r.args,n);i=new St(new me(r.module_name,new G(r.name),s,a))}else if(o instanceof Pt){const r=o,a=Qt.toTransactionArguments(r.args,n);i=new Bt(new Tt(r.code,s,a))}else throw new Error("Unknown ABI format.");return i}build(e,t,n){const{sender:s,sequenceNumber:i,gasUnitPrice:o,maxGasAmount:r,expSecFromNow:a,chainId:c}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");const d=s instanceof E?s:E.fromHex(s),u=BigInt(Math.floor(Date.now()/1e3)+Number(a)),l=this.buildTransactionPayload(e,t,n);if(l)return new Ee(d,BigInt(i),l,BigInt(r),BigInt(o),u,new Et(Number(c)));throw new Error("Invalid ABI.")}},ys=class{constructor(e,t){this.aptosClient=e,this.builderConfig=t}async fetchABI(e){const n=(await this.aptosClient.getAccountModules(e)).map(i=>i.abi).flatMap(i=>i.exposed_functions.filter(o=>o.is_entry).map(o=>({fullName:`${i.address}::${i.name}::${o.name}`,...o}))),s=new Map;return n.forEach(i=>{s.set(i.fullName,i)}),s}async build(e,t,n){if(e=(y=>y.replace(/^0[xX]0*/g,"0x"))(e),e.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");const[o,r]=e.split("::"),a=await this.fetchABI(o);if(!a.has(e))throw new Error(`${e} doesn't exist.`);const c=a.get(e),u=c.params.filter(y=>y!=="signer"&&y!=="&signer").map((y,h)=>new it(`var${h}`,new Ge(y,t).parseTypeTag())),l=new Ne(c.name,ve.fromStr(`${o}::${r}`),"",c.generic_type_params.map((y,h)=>new st(`${h}`)),u),{sender:f,..._}=this.builderConfig,T=f instanceof E?p.fromUint8Array(f.address):f,[{sequence_number:v},U,{gas_estimate:$}]=await Promise.all([_!=null&&_.sequenceNumber?Promise.resolve({sequence_number:_==null?void 0:_.sequenceNumber}):this.aptosClient.getAccount(T),_!=null&&_.chainId?Promise.resolve(_==null?void 0:_.chainId):this.aptosClient.getChainId(),_!=null&&_.gasUnitPrice?Promise.resolve({gas_estimate:_==null?void 0:_.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new Qt([se(l)],{sender:f,sequenceNumber:v,chainId:U,gasUnitPrice:BigInt($),..._}).build(e,t,n)}};I([is(10*60*1e3)],ys.prototype,"fetchABI",1);var Ie=class{constructor(e,t,n=!1){if(!e)throw new Error("Node URL cannot be empty.");n?this.nodeUrl=e:this.nodeUrl=sr(e),this.config=t==null?{}:{...t}}async getAccount(e){const{data:t}=await W({url:this.nodeUrl,endpoint:`accounts/${p.ensure(e).hex()}`,originMethod:"getAccount",overrides:{...this.config}});return t}async getAccountTransactions(e,t){const{data:n}=await W({url:this.nodeUrl,endpoint:`accounts/${p.ensure(e).hex()}/transactions`,originMethod:"getAccountTransactions",params:{start:t==null?void 0:t.start,limit:t==null?void 0:t.limit},overrides:{...this.config}});return n}async getAccountModules(e,t){return await mn({url:this.nodeUrl,endpoint:`accounts/${e}/modules`,params:{ledger_version:t==null?void 0:t.ledgerVersion,limit:1e3},originMethod:"getAccountModules",overrides:{...this.config}})}async getAccountModule(e,t,n){const{data:s}=await W({url:this.nodeUrl,endpoint:`accounts/${p.ensure(e).hex()}/module/${t}`,originMethod:"getAccountModule",params:{ledger_version:n==null?void 0:n.ledgerVersion},overrides:{...this.config}});return s}async getAccountResources(e,t){return await mn({url:this.nodeUrl,endpoint:`accounts/${e}/resources`,params:{ledger_version:t==null?void 0:t.ledgerVersion,limit:9999},originMethod:"getAccountResources",overrides:{...this.config}})}async getAccountResource(e,t,n){const{data:s}=await W({url:this.nodeUrl,endpoint:`accounts/${p.ensure(e).hex()}/resource/${t}`,originMethod:"getAccountResource",params:{ledger_version:n==null?void 0:n.ledgerVersion},overrides:{...this.config}});return s}static generateBCSTransaction(e,t){return new Gt(s=>{const i=e.signBuffer(s);return new H.Ed25519Signature(i.toUint8Array())},e.pubKey().toUint8Array()).sign(t)}static generateBCSSimulation(e,t){return new Gt(s=>{const i=new Uint8Array(64);return new H.Ed25519Signature(i)},e.pubKey().toUint8Array()).sign(t)}async generateTransaction(e,t,n){const s={sender:e};if(n!=null&&n.sequence_number&&(s.sequenceNumber=n.sequence_number),n!=null&&n.gas_unit_price&&(s.gasUnitPrice=n.gas_unit_price),n!=null&&n.max_gas_amount&&(s.maxGasAmount=n.max_gas_amount),n!=null&&n.expiration_timestamp_secs){const o=Number.parseInt(n.expiration_timestamp_secs,10);s.expSecFromNow=o-Math.floor(Date.now()/1e3)}return new ys(this,s).build(t.function,t.type_arguments,t.arguments)}async generateFeePayerTransaction(e,t,n,s=[],i){const o=await this.generateTransaction(e,t,i),r=s.map(c=>E.fromHex(c));return new H.FeePayerRawTransaction(o,r,E.fromHex(n))}async submitFeePayerTransaction(e,t,n,s=[]){const i=new H.TransactionAuthenticatorFeePayer(t,e.secondary_signer_addresses,s,{address:e.fee_payer_address,authenticator:n}),o=se(new H.SignedTransaction(e.raw_txn,i));return await this.submitSignedBCSTransaction(o)}async signMultiTransaction(e,t){const n=new H.Ed25519Signature(e.signBuffer(Qe.getSigningMessage(t)).toUint8Array()),s=new H.AccountAuthenticatorEd25519(new H.Ed25519PublicKey(e.signingKey.publicKey),n);return Promise.resolve(s)}async signTransaction(e,t){return Promise.resolve(Ie.generateBCSTransaction(e,t))}async getEventsByCreationNumber(e,t,n){const{data:s}=await W({url:this.nodeUrl,endpoint:`accounts/${p.ensure(e).hex()}/events/${t}`,originMethod:"getEventsByCreationNumber",params:{start:n==null?void 0:n.start,limit:n==null?void 0:n.limit},overrides:{...this.config}});return s}async getEventsByEventHandle(e,t,n,s){const{data:i}=await W({url:this.nodeUrl,endpoint:`accounts/${p.ensure(e).hex()}/events/${t}/${n}`,originMethod:"getEventsByEventHandle",params:{start:s==null?void 0:s.start,limit:s==null?void 0:s.limit},overrides:{...this.config}});return i}async submitTransaction(e){return this.submitSignedBCSTransaction(e)}async simulateTransaction(e,t,n){let s;return e instanceof Vt?s=Ie.generateBCSSimulation(e,t):e instanceof et?s=new co(()=>{const{threshold:o}=e,r=[],a=[];for(let d=0;d<o;d+=1)r.push(d),a.push(new H.Ed25519Signature(new Uint8Array(64)));const c=H.MultiEd25519Signature.createBitmap(r);return new H.MultiEd25519Signature(a,c)},e).sign(t):s=new Gt(()=>{const o=new Uint8Array(64);return new H.Ed25519Signature(o)},e.toBytes()).sign(t),this.submitBCSSimulation(s,n)}async submitSignedBCSTransaction(e){const{data:t}=await We({url:this.nodeUrl,body:e,endpoint:"transactions",originMethod:"submitSignedBCSTransaction",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return t}async submitBCSSimulation(e,t){var n,s,i;const o={estimate_gas_unit_price:(n=t==null?void 0:t.estimateGasUnitPrice)!=null?n:!1,estimate_max_gas_amount:(s=t==null?void 0:t.estimateMaxGasAmount)!=null?s:!1,estimate_prioritized_gas_unit_price:(i=t==null?void 0:t.estimatePrioritizedGasUnitPrice)!=null?i:!1},{data:r}=await We({url:this.nodeUrl,body:e,endpoint:"transactions/simulate",params:o,originMethod:"submitBCSSimulation",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return r}async getTransactions(e){var t;const{data:n}=await W({url:this.nodeUrl,endpoint:"transactions",originMethod:"getTransactions",params:{start:(t=e==null?void 0:e.start)==null?void 0:t.toString(),limit:e==null?void 0:e.limit},overrides:{...this.config}});return n}async getTransactionByHash(e){const{data:t}=await W({url:this.nodeUrl,endpoint:`transactions/by_hash/${e}`,originMethod:"getTransactionByHash",overrides:{...this.config}});return t}async getTransactionByVersion(e){const{data:t}=await W({url:this.nodeUrl,endpoint:`transactions/by_version/${e}`,originMethod:"getTransactionByVersion",overrides:{...this.config}});return t}async transactionPending(e){try{return(await this.getTransactionByHash(e)).type==="pending_transaction"}catch(t){if((t==null?void 0:t.status)===404)return!0;throw t}}async waitForTransactionWithResult(e,t){var n,s;const i=(n=t==null?void 0:t.timeoutSecs)!=null?n:ir,o=(s=t==null?void 0:t.checkSuccess)!=null?s:!1;let r=!0,a=0,c;for(;r&&!(a>=i);){try{if(c=await this.getTransactionByHash(e),r=c.type==="pending_transaction",!r)break}catch(d){const u=d instanceof yn,l=u&&d.status!==404&&d.status>=400&&d.status<500;if(!u||l)throw d}await nr(1e3),a+=1}if(c===void 0)throw new Error(`Waiting for transaction ${e} failed`);if(r)throw new lo(`Waiting for transaction ${e} timed out after ${i} seconds`,c);if(!o)return c;if(!(c!=null&&c.success))throw new uo(`Transaction ${e} failed with an error: ${c.vm_status}`,c);return c}async waitForTransaction(e,t){await this.waitForTransactionWithResult(e,t)}async getLedgerInfo(){const{data:e}=await W({url:this.nodeUrl,originMethod:"getLedgerInfo",overrides:{...this.config}});return e}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(e,t,n){var s;return(await We({url:this.nodeUrl,body:t,endpoint:`tables/${e}/item`,originMethod:"getTableItem",params:{ledger_version:(s=n==null?void 0:n.ledgerVersion)==null?void 0:s.toString()},overrides:{...this.config}})).data}async generateRawTransaction(e,t,n){const[{sequence_number:s},i,{gas_estimate:o}]=await Promise.all([n!=null&&n.providedSequenceNumber?Promise.resolve({sequence_number:n.providedSequenceNumber}):this.getAccount(e),this.getChainId(),n!=null&&n.gasUnitPrice?Promise.resolve({gas_estimate:n.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:r,gasUnitPrice:a,expireTimestamp:c}={maxGasAmount:BigInt(ns),gasUnitPrice:BigInt(o),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+ss),...n};return new H.RawTransaction(H.AccountAddress.fromHex(e),BigInt(s),t,r,a,c,new H.ChainId(i))}async generateSignSubmitTransaction(e,t,n){const s=await this.generateRawTransaction(e.address(),t,n),i=Ie.generateBCSTransaction(e,s);return(await this.submitSignedBCSTransaction(i)).hash}async signAndSubmitTransaction(e,t){const n=Ie.generateBCSTransaction(e,t);return(await this.submitSignedBCSTransaction(n)).hash}async publishPackage(e,t,n,s){const i=new C;q(n,i);const o=new H.TransactionPayloadEntryFunction(H.EntryFunction.natural("0x1::code","publish_package_txn",[],[fe(t),i.getBytes()]));return this.generateSignSubmitTransaction(e,o,s)}async createResourceAccountAndPublishPackage(e,t,n,s,i){const o=new C;q(s,o);const r=new H.TransactionPayloadEntryFunction(H.EntryFunction.natural("0x1::resource_account","create_resource_account_and_publish_package",[],[fe(t),fe(n),o.getBytes()]));return this.generateSignSubmitTransaction(e,r,i)}async generateSignSubmitWaitForTransaction(e,t,n){const s=await this.generateSignSubmitTransaction(e,t,n);return this.waitForTransactionWithResult(s,n)}async estimateGasPrice(){const{data:e}=await W({url:this.nodeUrl,endpoint:"estimate_gas_price",originMethod:"estimateGasPrice",overrides:{...this.config}});return e}async estimateMaxGasAmount(e){const t=`0x1::coin::CoinStore<${rr}>`,[{gas_estimate:n},s]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(e)]),i=s.find(r=>r.type===t);return BigInt(i.data.coin.value)/BigInt(n)}async rotateAuthKeyEd25519(e,t,n){const{sequence_number:s,authentication_key:i}=await this.getAccount(e.address()),o=new Vt(t),r=new H.RotationProofChallenge(H.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(s),H.AccountAddress.fromHex(e.address()),new H.AccountAddress(new p(i).toUint8Array()),o.pubKey().toUint8Array()),a=p.fromUint8Array(se(r)),c=e.signHexString(a),d=o.signHexString(a),u=new H.TransactionPayloadEntryFunction(H.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[Wt(0),fe(e.pubKey().toUint8Array()),Wt(0),fe(o.pubKey().toUint8Array()),fe(c.toUint8Array()),fe(d.toUint8Array())])),l=await this.generateRawTransaction(e.address(),u,n),f=Ie.generateBCSTransaction(e,l);return this.submitSignedBCSTransaction(f)}async lookupOriginalAddress(e){const t=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:n}}=t.data,s=await this.getTableItem(n,{key_type:"address",value_type:"address",key:p.ensure(e).hex()});return new p(s)}async getBlockByHeight(e,t){const{data:n}=await W({url:this.nodeUrl,endpoint:`blocks/by_height/${e}`,originMethod:"getBlockByHeight",params:{with_transactions:t},overrides:{...this.config}});return n}async getBlockByVersion(e,t){const{data:n}=await W({url:this.nodeUrl,endpoint:`blocks/by_version/${e}`,originMethod:"getBlockByVersion",params:{with_transactions:t},overrides:{...this.config}});return n}async view(e,t){const{data:n}=await We({url:this.nodeUrl,body:e,endpoint:"view",originMethod:"getTableItem",params:{ledger_version:t},overrides:{...this.config}});return n}clearCache(e){or(e)}},L=Ie;I([P],L.prototype,"getAccount",1);I([P],L.prototype,"getAccountTransactions",1);I([P,is(10*60*1e3)],L.prototype,"getAccountModules",1);I([P],L.prototype,"getAccountModule",1);I([P],L.prototype,"getAccountResources",1);I([P],L.prototype,"getAccountResource",1);I([P],L.prototype,"getEventsByCreationNumber",1);I([P],L.prototype,"getEventsByEventHandle",1);I([P],L.prototype,"submitSignedBCSTransaction",1);I([P],L.prototype,"submitBCSSimulation",1);I([P],L.prototype,"getTransactions",1);I([P],L.prototype,"getTransactionByHash",1);I([P],L.prototype,"getTransactionByVersion",1);I([P],L.prototype,"getLedgerInfo",1);I([wt()],L.prototype,"getChainId",1);I([P],L.prototype,"getTableItem",1);I([P,wt({ttlMs:5*60*1e3,tags:["gas_estimates"]})],L.prototype,"estimateGasPrice",1);I([P],L.prototype,"estimateMaxGasAmount",1);I([P],L.prototype,"getBlockByHeight",1);I([P],L.prototype,"getBlockByVersion",1);I([P],L.prototype,"view",1);var lo=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},uo=class extends Error{constructor(e,t){super(e),this.transaction=t}},yn=class extends Error{constructor(e,t,n,s){super(t),this.status=e,this.message=t,this.errorCode=n,this.vmErrorCode=s}};function P(e,t,n){const s=n.value;return n.value=async function(...o){var r,a;try{return await s.apply(this,[...o])}catch(c){throw c instanceof rs?new yn(c.status,JSON.stringify({message:c.message,...c.data}),(r=c.data)==null?void 0:r.error_code,(a=c.data)==null?void 0:a.vm_error_code):c}},n}var D=class{constructor(e,t){this.endpoint=e,this.config=t}static validateAddress(e){if(e.length<66)throw new Error(`${e} is less than 66 chars long.`)}async queryIndexer(e){const t=await We({url:this.endpoint,body:e,overrides:{WITH_CREDENTIALS:!1,...this.config}});if(t.data.errors)throw new yn(t.data.errors[0].extensions.code,JSON.stringify({message:t.data.errors[0].message,error_code:t.data.errors[0].extensions.code}));return t.data.data}async getIndexerLedgerInfo(){const e={query:Rr};return this.queryIndexer(e)}async getAccountNFTs(e,t){const n=p.ensure(e).hex();D.validateAddress(n);const s={query:Or,variables:{address:n,offset:t==null?void 0:t.offset,limit:t==null?void 0:t.limit}};return this.queryIndexer(s)}async getTokenActivities(e,t){var n,s;const i=p.ensure(e).hex();D.validateAddress(i);const o={token_data_id:{_eq:i}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const r={query:Vr,variables:{where_condition:o,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}async getTokenActivitiesCount(e){const t={query:Qr,variables:{token_id:e}};return this.queryIndexer(t)}async getAccountTokensCount(e,t){var n,s;const i={owner_address:{_eq:e},amount:{_gt:"0"}};t!=null&&t.tokenStandard&&(i.token_standard={_eq:t==null?void 0:t.tokenStandard});const o=p.ensure(e).hex();D.validateAddress(o);const r={query:Nr,variables:{where_condition:i,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit}};return this.queryIndexer(r)}async getTokenData(e,t){var n,s;const i=p.ensure(e).hex();D.validateAddress(i);const o={token_data_id:{_eq:i}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const r={query:Jr,variables:{where_condition:o,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}async getTokenOwnersData(e,t,n){var s,i;const o=p.ensure(e).hex();D.validateAddress(o);const r={token_data_id:{_eq:o},amount:{_gt:"0"}};t&&(r.property_version_v1={_eq:t}),n!=null&&n.tokenStandard&&(r.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Zr,variables:{where_condition:r,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(i=n==null?void 0:n.options)==null?void 0:i.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenCurrentOwnerData(e,t,n){var s,i;const o=p.ensure(e).hex();D.validateAddress(o);const r={token_data_id:{_eq:o},amount:{_gt:"0"}};t&&(r.property_version_v1={_eq:t}),n!=null&&n.tokenStandard&&(r.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Xr,variables:{where_condition:r,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(i=n==null?void 0:n.options)==null?void 0:i.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getOwnedTokens(e,t){var n,s;const i=p.ensure(e).hex();D.validateAddress(i);const o={owner_address:{_eq:i},amount:{_gt:0}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const r={query:Wr,variables:{where_condition:o,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}async getOwnedTokensByTokenData(e,t){var n,s;const i=p.ensure(e).hex();D.validateAddress(i);const o={token_data_id:{_eq:i},amount:{_gt:0}};t!=null&&t.tokenStandard&&(o.token_standard={_eq:t==null?void 0:t.tokenStandard});const r={query:jr,variables:{where_condition:o,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}async getTokenOwnedFromCollectionAddress(e,t,n){var s,i;const o=p.ensure(e).hex();D.validateAddress(o);const r=p.ensure(t).hex();D.validateAddress(r);const a={owner_address:{_eq:o},current_token_data:{collection_id:{_eq:r}},amount:{_gt:0}};n!=null&&n.tokenStandard&&(a.token_standard={_eq:n==null?void 0:n.tokenStandard});const c={query:Yr,variables:{where_condition:a,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(i=n==null?void 0:n.options)==null?void 0:i.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(c)}async getTokenOwnedFromCollectionNameAndCreatorAddress(e,t,n,s){const i=await this.getCollectionAddress(n,t,s);return await this.getTokenOwnedFromCollectionAddress(e,i,s)}async getCollectionData(e,t,n){var s,i;const o=p.ensure(e).hex();D.validateAddress(o);const r={collection_name:{_eq:t},creator_address:{_eq:o}};n!=null&&n.tokenStandard&&(r.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Mr,variables:{where_condition:r,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(i=n==null?void 0:n.options)==null?void 0:i.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getCollectionAddress(e,t,n){return(await this.getCollectionData(e,t,n)).current_collections_v2[0].collection_id}async getCollectionsWithOwnedTokens(e,t){var n,s;const i=p.ensure(e).hex();D.validateAddress(i);const o={owner_address:{_eq:i}};t!=null&&t.tokenStandard&&(o.current_collection={token_standard:{_eq:t==null?void 0:t.tokenStandard}});const r={query:Fr,variables:{where_condition:o,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}async getAccountTransactionsCount(e){const t=p.ensure(e).hex();D.validateAddress(t);const n={query:Dr,variables:{address:t}};return this.queryIndexer(n)}async getAccountTransactionsData(e,t){var n,s;const i=p.ensure(e).hex();D.validateAddress(i);const r={query:Pr,variables:{where_condition:{account_address:{_eq:i}},offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}async getTopUserTransactions(e){const t={query:eo,variables:{limit:e}};return this.queryIndexer(t)}async getUserTransactions(e){var t,n;const s={version:{_lte:e==null?void 0:e.startVersion}},i={query:to,variables:{where_condition:s,offset:(t=e==null?void 0:e.options)==null?void 0:t.offset,limit:(n=e==null?void 0:e.options)==null?void 0:n.limit,order_by:e==null?void 0:e.orderBy}};return this.queryIndexer(i)}async getDelegatedStakingActivities(e,t){const n=p.ensure(e).hex(),s=p.ensure(t).hex();D.validateAddress(n),D.validateAddress(s);const i={query:Gr,variables:{delegatorAddress:n,poolAddress:s}};return this.queryIndexer(i)}async getNumberOfDelegators(e){const t=p.ensure(e).hex();D.validateAddress(t);const n={query:Kr,variables:{poolAddress:t}};return this.queryIndexer(n)}async getAccountCoinsData(e,t){var n,s;const i=p.ensure(e).hex();D.validateAddress(i);const r={query:Lr,variables:{where_condition:{owner_address:{_eq:i}},offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}async getAccountCoinsDataCount(e){const t=p.ensure(e).hex();D.validateAddress(t);const n={query:Cr,variables:{address:t}};return this.queryIndexer(n)}async getAccountOwnedObjects(e,t){var n,s;const i=p.ensure(e).hex();D.validateAddress(i);const r={query:qr,variables:{where_condition:{owner_address:{_eq:i}},offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(r)}},bs=class{constructor(e,t,n=!1){let s=null,i=null;if(typeof e=="object"&&ho(e)?(s=e.fullnodeUrl,i=e.indexerUrl,this.network="CUSTOM"):(s=dr[e],i=lr[e],this.network=e),this.network==="CUSTOM"&&!s)throw new Error("fullnode url is not provided");i&&(this.indexerClient=new D(i,t)),this.aptosClient=new L(s,t,n)}};function ps(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(s=>{const i=Object.getOwnPropertyDescriptor(t.prototype,s);i&&(i.value=function(...o){return this[n][s](...o)},Object.defineProperty(e.prototype,s,i))}),Object.getOwnPropertyNames(t).forEach(s=>{const i=Object.getOwnPropertyDescriptor(t,s);i&&(i.value=function(...o){return this[n][s](...o)},!e.hasOwnProperty.call(e,s)&&Object.defineProperty(e,s,i))})}ps(bs,L,"aptosClient");ps(bs,D,"indexerClient");function ho(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"}var gs=class{constructor(e,t){this.type=e,this.value=t}},ws=class{constructor(){this.data={}}setProperty(e,t){this.data[e]=t}};function fo(e){let t;return e==="string"||e==="String"?t=new pe(cn):t=new Ge(e).parseTypeTag(),t}function ms(e){const t=e.map.data,n=new ws;return t.forEach(s=>{const{key:i}=s,o=s.value.value,r=s.value.type,a=fo(r),c=_o(a,o),d=new gs(r,c);n.setProperty(i,d)}),n}function _o(e,t){const n=new tn(new p(t).toUint8Array());let s="";return e instanceof ie?s=n.deserializeU8().toString():e instanceof Be?s=n.deserializeU64().toString():e instanceof Se?s=n.deserializeU128().toString():e instanceof Ue?s=n.deserializeBool()?"true":"false":e instanceof be?s=p.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof pe&&e.isStringTypeTag()?s=n.deserializeStr():s=t,s}var yo={};gt(yo,{PropertyMap:()=>ws,PropertyValue:()=>gs,Token:()=>po,TokenData:()=>bo});var bo=class{constructor(e,t,n,s,i,o,r,a){this.collection=e,this.description=t,this.name=n,this.maximum=s,this.supply=i,this.uri=o,this.default_properties=ms(r),this.mutability_config=a}},po=class{constructor(e,t,n){this.id=e,this.amount=t,this.token_properties=ms(n)}},go={};gt(go,{AptosErrorCode:()=>vs,MoveFunctionVisibility:()=>xs,RoleType:()=>Ts});var vs=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.STATE_VALUE_NOT_FOUND="state_value_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(vs||{}),xs=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(xs||{}),Ts=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(Ts||{});export{L as A,H as a,ur as b};
